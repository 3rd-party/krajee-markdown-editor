/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2017
 * @package krajee-markdown-editor
 * @version 1.0.0
 *
 * A Boostrap styled markdown editor that offers live preview, export, full screen mode, and more features. Can support
 * any markdown parser that can be triggered as an ajax action on the server. Editor defaults are built to support
 * CommonMark spec parsing using markdown-it JS library. Other markdown parsers are configurable (both as a server 
 * call OR a local JS method/library). In addition, the plugin allows  custom button actions and properties to be setup.
 * 
 * Author: Kartik Visweswaran
 * Copyright: 2015, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";e.fn.markdownEditorLocales={};var t,o,n,r,i,a,s;t={CREDITS:'<a class="text-info" href="http://plugins.krajee.com/markdown-editor">krajee-markdown-editor</a>',CREDITS_MD:"[krajee-markdown-editor](http://plugins.krajee.com/markdown-editor)",DEFAULT_TIMEOUT:250,EMPTY:"",NAMESPACE:".markdownEditor",htmlEncode:function(e){return void 0===e?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},parseHtml:function(e){return void 0===e?"":t.kvUnescape(encodeURIComponent(e))},create:function(t){return e(document.createElement(t))},addCss:function(e,t){t&&e.removeClass(t).addClass(t)},uniqueId:function(){return Math.round((new Date).getTime()+100*Math.random())},isEmpty:function(o,n){return null===o||void 0===o||0===o.length||n&&e.trim(o)===t.EMPTY},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},trimRight:function(e,t){return void 0===t&&(t="s"),e.replace(new RegExp("["+t+"]+$"),"")},getMarkUp:function(e,t,o){var n=t.length,r=o.length,i=e;return n>0&&(i=i.slice(0,n)===t?i.slice(n):t+i),r>0&&(i=i.slice(-r)===o?i.slice(0,-r):i+o),i},getBlockMarkUp:function(o,n,r){var i=o,a=[];return i.indexOf("\n")<0?i=t.getMarkUp(o,n,r):(a=o.split("\n"),e.each(a,function(e,o){a[e]=t.getMarkUp(t.trimRight(o),n,r+"  ")}),i=a.join("\n")),i},setWhitespace:function(e,t){try{e.style.whiteSpace=t}catch(o){}},setSelectionRange:function(o,n,r){var i,a;if(o.setSelectionRange)o.focus(),o.setSelectionRange(n,r),o.scrollTop=0,n>100&&(i=document.createElement("pre"),o.parentNode.appendChild(i),a=window.getComputedStyle(o,""),i.style.visibility="hidden",i.style.lineHeight=a.lineHeight,i.style.fontFamily=a.fontFamily,i.style.fontSize=a.fontSize,i.style.padding=0,i.style.border=a.border,i.style.outline=a.outline,i.style.overflow="scroll",i.style.letterSpacing=a.letterSpacing,t.setWhitespace(i,"-moz-pre-wrap"),t.setWhitespace(i,"-o-pre-wrap"),t.setWhitespace(i,"-pre-wrap"),t.setWhitespace(i,"pre-wrap"),i.textContent=e(o).val().substring(0,n-100),o.scrollTop=i.scrollHeight,i.parentNode.removeChild(i));else if(o.createTextRange){var s=o.createTextRange();s.collapse(!0),s.moveEnd("character",r),s.moveStart("character",n),s.select()}},kvUnescape:function(e){return e.replace(/%([0-9A-F]{2})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})},handler:function(e,t){e&&e.isDefaultPrevented()||t()},delay:function(){var e=0;return function(o,n){clearTimeout(e),e=setTimeout(o,n||t.DEFAULT_TIMEOUT)}}()},o={main:'<div class="md-editor" tabindex="0">\n  {header}\n  <table class="md-input-preview">\n    <tr>\n      <td class="md-input-cell">{input}</td>\n      <td class="md-preview-cell">{preview}</td>\n    </tr>  </table>\n  {footer}\n  {dialog}\n</div>',header:'<div class="md-header">\n  <div class="md-toolbar-header-r btn-toolbar pull-right">\n    {toolbarHeaderR}\n  </div>\n  <div class="md-toolbar-header-l btn-toolbar">\n    {toolbarHeaderL}\n  </div>\n  <div class="clearfix">\n  </div>\n</div>',preview:'<div class="md-preview" tabindex="0">\n</div>',footer:'<div class="md-footer">\n  <div class="md-toolbar-footer-r btn-toolbar pull-right">\n    {toolbarFooterR}\n  </div>\n  <div class="md-toolbar-footer-l btn-toolbar">\n    {toolbarFooterL}\n  </div>\n  <div class="clearfix">\n  </div>\n</div>',dialog:'<div class="md-dialog modal fade" tabindex="-1" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times,</span>\n        </button>\n        <h4 class="md-dialog-title modal-title"></h4>\n      </div>\n      <div class="modal-body">\n        <input class="md-dialog-input form-control">\n        <div class="md-dialog-content"></div>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="md-dialog-cancel btn btn-default" data-dismiss="modal">\n          <i class="fa fa-remove"></i> \n        </button>\n        <button type="button" class="md-dialog-ok btn btn-primary" data-dismiss="modal">\n          <i class="fa fa-check"></i> \n        </button>\n      </div>\n    </div>\n</div>',exportHeader:"> - - -\n> Markdown Export\n>: ==============\n> *Generated {today} by {credits}*\n> - - -\n\n",htmlMeta:'<!DOCTYPE html>\n  <meta http-equiv="Content-Type" content="text/html,charset=UTF-8"/>\n  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>\n',exportCssJs:'{exportPrependCssJs}\n<style>\n  body{margin:20px,padding:20px,border:1px solid #ddd,border-radius:5px,}\n  th[align="right"]{text-align:right!important}\n  th[align="center"]{text-align:center!important}\n</style>',prependCss:'<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">',hint:'<ul>\n  <li><p>You may follow the     <a href="http://spec.commonmark.org/" target="_blank">CommonMark spec</a> and     <a href="https://github.com/markdown-it/markdown-it">markdown-it</a> syntax for writing your markdown   text.</p></li>\n  <li><p>In order to use the formatting buttons on the toolbar, you typically need to highlight a text   within the editor on which the formatting is to be applied. You can also undo the format action on the   highlighted text by clicking the button again (for most buttons).</p></li>\n  <li><p>Keyboard access shortcuts for buttons:</p>    {accessKeys}  </li>\n</ul>'},n={click:"click"+t.NAMESPACE,input:"input"+t.NAMESPACE,change:"change"+t.NAMESPACE,focus:"focus"+t.NAMESPACE,blur:"blur"+t.NAMESPACE,keyup:"keyup"+t.NAMESPACE,keydown:"keydown"+t.NAMESPACE,resize:"resize"+t.NAMESPACE,reset:"reset"+t.NAMESPACE,scroll:"scroll"+t.NAMESPACE,touchstart:"touchstart"+t.NAMESPACE,mouseover:"mouseover"+t.NAMESPACE,modalShown:"shown.bs.modal"+t.NAMESPACE,modalHidden:"hidden.bs.modal"+t.NAMESPACE,buttonPress:"buttonPress"+t.NAMESPACE,beforePreview:"beforePreview"+t.NAMESPACE,successPreview:"successPreview"+t.NAMESPACE,emptyPreview:"emptyPreview"+t.NAMESPACE,errorPreview:"errorPreview"+t.NAMESPACE},r={icons:{undo:"undo",redo:"repeat",bold:"bold",italic:"italic",ins:"underline",del:"strikethrough",sup:"superscript",sub:"subscript",mark:"eraser",paragraph:"paragraph",newline:"text-height",heading:"header",link:"link",image:"picture-o",indent:"indent",outdent:"outdent",ul:"list-ul",ol:"list-ol",dl:"th-list",footnote:"sticky-note-o",blockquote:"quote-right",code:"code",codeblock:"file-code-o",hr:"minus",emoji:"smile-o",fullscreen:"arrows-alt",hint:"question-circle",modePreview:"search",modeEditor:"edit",modeSplit:"arrows-h","export":"download",exportHtml:"file-text",exportText:"file-text-o"},accessKeys:{undo:"z",redo:"y",bold:"[",italic:"]",ins:"+",del:"x",sup:"~",sub:"^",mark:"=",paragraph:"p",newline:"0",heading1:"1",heading2:"2",heading3:"3",heading4:"4",heading5:"5",heading6:"6",link:"l",image:"p",indent:"i",outdent:"o",ul:"u",ol:"v",dl:"w",footnote:"n",blockquote:"q",code:"c",codeblock:"b",hr:"-",emoji:"`",fullscreen:".",hint:"?",modeEditor:"(",modePreview:")",modeSplit:"_",exportHtml:"h",exportText:"t"},titles:{undo:"Undo",redo:"Redo",bold:"Bold",italic:"Italic",ins:"Inserted Text",del:"Strike Through",sup:"Superscript",sub:"Subscript",mark:"Highlighted Text",paragraph:"Paragraph",newline:"Append line break",heading:"Heading",link:"Hyperlink",image:"Image Link",indent:"Indent Text",outdent:"Outdent Text",ul:"Unordered List",ol:"Ordered List",dl:"Definition List",footnote:"Footnote",blockquote:"Block Quote",code:"Inline Code",codeblock:"Code Block",hr:"Horizontal Line",emoji:"Emojis / Emoticons",fullscreen:"Toggle full screen mode",hint:"Usage Hints",modeEditor:"Editor mode",modePreview:"Preview mode",modeSplit:"Split mode","export":"Export content",exportHtml:"Export as HTML",exportText:"Export as Text"},labels:{"export":"Export",exportHtml:"HTML",exportText:"Text"},prompts:{link:{title:"Insert Hyperlink",placeholder:"http://"},image:{title:"Insert Image Link",placeholder:"http://"},ol:{title:"Ordered List Starting Number",placeholder:"Integer starting from 1"},codeblock:{title:"Enter code language",placeholder:"e.g. html, php, js"}},actions:{bold:{before:"**",after:"**","default":"**(bold text here)**"},italic:{before:"_",after:"_","default":"_(italic text here)_"},ins:{before:"++",after:"++","default":"_(inserted text here)_"},del:{before:"~~",after:"~~","default":"_(strikethrough text here)_"},mark:{before:"==",after:"==","default":"_(marked text here)_"},sup:{before:"^",after:"^","default":"_(superscript text here)_"},sub:{before:"~",after:"~","default":"_(subscript text here)_"},paragraph:{before:"\n",after:"\n","default":"\n(paragraph text here)\n",inline:!0},newline:{before:t.EMPTY,after:"  "},heading1:{before:"# ","default":"# (heading 1 text here)",inline:!0},heading2:{before:"## ","default":"## (heading 2 text here)",inline:!0},heading3:{before:"### ","default":"### (heading 3 text here)",inline:!0},heading4:{before:"#### ","default":"#### (heading 4 text here)",inline:!0},heading5:{before:"##### ","default":"##### (heading 5 text here)",inline:!0},heading6:{before:"###### ","default":"###### (heading 6 text here)",inline:!0},indent:function(t){var o,n="  ";return t.indexOf("\n")<0?t=n+t:(o=t.split("\n"),e.each(o,function(e,t){o[e]=n+t}),t=o.join("\n")),t},outdent:function(t){var o,n="  ";return t.indexOf("\n")<0&&t.substr(0,2)===n?t=t.slice(2):(o=t.split("\n"),e.each(o,function(e,t){o[e]=t,t.substr(0,2)===n&&(o[e]=t.slice(2))}),t=o.join("\n")),t},link:function(e){return function(o){return t.isEmpty(o)||("ftp://"!==o.substring(0,6)&&"http://"!==o.substring(0,7)&&"https://"!==o.substring(0,8)&&(o="http://"+o),e="["+e+"]("+o+")"),e}},image:function(e){return function(o){return t.isEmpty(o)||("ftp://"!==o.substring(0,6)&&"http://"!==o.substring(0,7)&&"https://"!==o.substring(0,8)&&(o="http://"+o),e="!["+e+"]("+o+")"),e}},ul:{before:"- ",after:t.EMPTY},ol:function(o){var n,r;return function(i){return t.isEmpty(i)?t.EMPTY:(t.isNumber(i)||(i=1),o.indexOf("\n")<0?o=t.getMarkUp(o,i+". ",t.EMPTY):(n=parseInt(i),r=o.split("\n"),e.each(r,function(e,o){r[e]=t.getMarkUp(o,n+". ",t.EMPTY),n++}),o=r.join("\n")),o)}},dl:function(o){var n,r,i;return o.indexOf("\n")>0?(n=1,i=o.split("\n"),e.each(i,function(e,o){r=n%2===0?":    ":t.EMPTY,i[e]=t.getMarkUp(o,r,t.EMPTY),n++}),o=i.join("\n")):o+="\n:    \n",o},footnote:function(o){var n,r,i,a="Enter footnote ",s=t.EMPTY;return o.indexOf("\n")<0?(s="[^1]: "+a+"1\n",o=t.getMarkUp(o,t.EMPTY,a+"[^1]")+"\n"+s):(n=1,i=o.split("\n"),e.each(i,function(e,o){r="[^"+n+"]",i[e]=t.getMarkUp(o,t.EMPTY,r+"  "),s=s+r+": "+a+n+"\n",n++}),o=i.join("\n")+"  \n\n"+s),o},blockquote:{before:"> ",after:"  "},code:{before:"`",after:"`",inline:!0},codeblock:function(e){return function(o){return t.isEmpty(o,!0)&&(o=t.EMPTY),t.getMarkUp(e,"~~~"+o+" \n","\n~~~  \n")}},hr:{before:t.EMPTY,after:"\n- - -",inline:!0}},exportConfig:{exportText:{ext:"txt",uri:"data:text/plain;base64,"},exportHtml:{ext:"htm",uri:"data:text/html;base64,"}}},i=function(){this.init()},i.prototype={constructor:i,init:function(){var e=this;e.commands=[],e.stackPosition=-1,e.savePosition=-1},execute:function(e){var t=this;t._clearRedo(),e.execute(),t.commands.push(e),t.stackPosition++,t.changed()},undo:function(){var e=this;e.commands[e.stackPosition].undo(),e.stackPosition--,e.changed()},canUndo:function(){var e=this;return e.stackPosition>=0},redo:function(){var e=this;e.stackPosition++,e.commands[e.stackPosition].redo(),e.changed()},canRedo:function(){var e=this;return e.stackPosition<e.commands.length-1},save:function(){var e=this;e.savePosition=e.stackPosition,e.changed()},dirty:function(){var e=this;return e.stackPosition!==e.savePosition},_clearRedo:function(){var e=this;e.commands=e.commands.slice(0,e.stackPosition+1)},changed:function(){}},a=function(e,t,o,n,r){var i=this;i.textarea=e,i.oldValue=t,i.newValue=o,i.oldPos=n,i.newPos=r},a.prototype={constructor:a,execute:function(){},undo:function(){var e=this,o=e.textarea,n=o[0];o.val(e.oldValue),t.setSelectionRange(n,e.oldPos[0],e.oldPos[1])},redo:function(){var e=this,o=e.textarea,n=o[0];o.val(e.newValue),t.setSelectionRange(n,e.newPos[0],e.newPos[1])}},s=function(t,o){var n=this;n.$element=e(t),n.init(o)},s.prototype={constructor:s,init:function(o){var n=this,i=n.$element;e.each(o,function(e,t){n[e]=t}),i.attr("id")||i.attr("id",t.uniqueId()),n.$form=n.initForm(),n.$element.attr("rows",n.rows),n.buttonIcons=e.extend(!0,{},r.icons,n.buttonIcons),n.buttonTitles=e.extend(!0,{},r.titles,n.buttonTitles),n.buttonLabels=e.extend(!0,{},r.labels,n.buttonLabels),n.buttonPrompts=e.extend(!0,{},r.prompts,n.buttonPrompts),n.buttonAccessKeys=e.extend(!0,{},r.accessKeys,n.buttonAccessKeys),n.buttonActions=e.extend(!0,{},r.actions,n.buttonActions),n.exportConfig=e.extend(!0,{},r.exportConfig,n.exportConfig),n.defaultInputHeight=n.$element.height(),t.isEmpty(n.parserUrl)&&void 0===n.parserMethod&&window.markdownit&&(n.parserMethod=function(o){var r=window.markdownit(n.markdownItOptions);return t.isEmpty(n.markdownItDisabledRules)||r.disable(n.markdownItDisabledRules),e.each(n.markdownItPlugins,function(e,t){r.use(window[e],t)}),r.renderer.rules.emoji=function(e,t){return n.useTwemoji&&window.twemoji?window.twemoji.parse(e[t].content):'<span class="md-emoji">'+e[t].content+"</span>"},r.renderer.rules.paragraph_open=r.renderer.rules.heading_open=function(e,t,o,n,r){var i;return e[t].map&&0===e[t].level&&(i=e[t].map[0],e[t].attrJoin("class","md-line"),e[t].attrSet("data-line",String(i))),r.renderToken(e,t,o,n,r)},r.render(o)}),n.enableSplitMode&&void 0===n.enableLivePreview&&(n.enableLivePreview=!0),n.render(),n.$preview.height(n.defaultInputHeight),n.startFullScreen&&n.toggleFullScreen(),n.reset(),n.listen()},handleEvent:function(o,n,r){var i=this,a=n+t.NAMESPACE;o.off(a).on(a,e.proxy(i[r],i))},listen:function(){var t=this,o=t.$container,r=t.$element,i=t.$preview,a=r.closest("form"),s=n.resize,d=n.reset,l=n.keyup,c=n.buttonPress,u=n.focus,p=n.blur,m=n.change,f=n.click,h=n.touchstart+" "+n.mouseover,g=t.$editor.find(".md-emoji-search"),v=n.keydown;t.parseButtons(),o.find(".dropdown-toggle").dropdown(),t.handleEvent(t.$dialogInput,v,"keydownDialog"),t.handleEvent(r,u,"focus"),t.handleEvent(i,u,"focus"),t.handleEvent(r,p,"blur"),t.handleEvent(i,p,"blur"),t.handleEvent(t.$editor,u,"focusContainer"),t.handleEvent(e(window),s,"resizeWindow"),a.length&&t.handleEvent(a,d,"reset"),t.handleEvent(t.$btnUndo,f,"undo"),t.handleEvent(t.$btnRedo,f,"redo"),t.handleEvent(r,l,"keyup"),t.handleEvent(r,c,"buttonPress"),t.handleEvent(r,h,"mouseoverEditor"),t.handleEvent(i,h,"mouseoverPreview"),t.handleEvent(t.$modeInput,m,"modeChange"),g.length&&(t.handleEvent(g.find("input"),l,"emojiSearch"),t.handleEvent(g.find(".md-close"),f,"emojiSearchClose"))},resizeWindow:function(o){var n,r,i=this,a=i.$container,s=i.$preview;t.handler(o,function(){a.hasClass("md-fullscreen-overlay")&&i.resizeFullScreen(),n=s.find(".md-preview-message"),n.length&&(r=e(window).width()<640?"100%":.5*s.width(),n.width(r))})},emojiSearch:function(o){var n=this,r=n.$editor.find(".md-emoji-search"),i=r.find("input"),a=i.val(),s=r.closest("ul");t.handler(o,function(){t.delay(function(){s.find("li").each(function(){var t=e(this),o=t.find("a").attr("data-key");t.hasClass("md-emoji-search")||o&&-1!==o.indexOf(a)?t.show():t.hide()})})})},emojiSearchClose:function(e){var o=this,n=o.$editor.find(".md-emoji-search");t.handler(e,function(){e.stopPropagation(),n.closest("ul").find("li").show(),n.find("input").val("")})},focusContainer:function(e){var o=this;t.handler(e,function(){o.$element.focus()})},focus:function(e){var o=this;t.handler(e,function(){t.addCss(o.$editor,"active")})},blur:function(e){var o=this;t.handler(e,function(){o.$editor.removeClass("active")})},clickButton:function(e,o){var n,r,i=this,a=o.data("key"),s=o.hasClass("md-btn-heading"),d=o.hasClass("md-btn-export"),l=o.hasClass("md-btn-emoji");t.handler(e,function(){if(s||d||l){if(e.preventDefault(),d)return void i["export"](a);if(l)return void i.replaceSelected(":"+a+":")}switch(a){case"fullscreen":i.toggleFullScreen();break;case"hint":n=i.getTitle(a)+" <small>"+t.CREDITS+"</small>",i.showPopup(n,i.renderHint());break;default:r=i.process(a),t.isEmpty(r)||i.replaceSelected(r)}})},modeChange:function(e){var o,n=this;t.handler(e,function(){o=n.$mode.find('input:radio[name="mdMode"]:checked').val()||"modeEditor",n.toggleMode(o),n.currentMode=o.substr(4).toLowerCase()})},reset:function(e){var o=this,n=o.$element,r=n[0];t.handler(e,function(){setTimeout(function(){o.enableUndoRedo?(o.undoStack=o.resetUndoStack(),o.startValue=n.val(),o.startPos=[r.selectionStart,r.selectionEnd]):o.undoStack=null,o.$preview.is(":visible")&&setTimeout(function(){o.generatePreview()},1)},1)})},undo:function(e){var o=this;o.enableUndoRedo&&t.handler(e,function(){o.undoStack.undo(),o.scrollMap=null,o.enableLivePreview&&o.generatePreview()})},redo:function(e){var o=this;o.enableUndoRedo&&t.handler(e,function(){o.undoStack.redo(),o.scrollMap=null,o.enableLivePreview&&o.generatePreview()})},keyup:function(e){var o=this,n=o.$element,r=n[0],i=o.undoStack;t.handler(e,function(){o.enableLivePreview&&o.$preview.is(":visible")&&t.delay(o.generatePreview()),o.enableUndoRedo&&t.delay(function(){var e=n.val(),t=[r.selectionEnd,r.selectionEnd];e!==o.startValue&&(i.execute(new a(n,o.startValue,e,o.startPos,t)),o.startValue=e,o.startPos=t,o.scrollMap=null)})})},keydownDialog:function(e){var o=this;t.handler(e,function(){13===e.keyCode&&(o.$dialogOk.trigger("click"),e.stopPropagation(),e.preventDefault())})},buttonPress:function(e,o,n){var r,i=this,s=i.$element;t.handler(e,function(){i.enableUndoRedo&&(r=s.val(),i.startPos=o,i.undoStack.execute(new a(s,i.startValue,r,i.startPos,n)),i.startValue=r,i.startPos=n),i.enableLivePreview&&i.$preview.is(":visible")&&i.generatePreview()})},_mouseover:function(e,t){var o=this,r=o.$element,i=o.$preview,a=n.scroll;e&&e.isDefaultPrevented()||!r.is(":visible")||!i.is(":visible")||("editor"===t?(i.off(a),r.on(a,function(){o.syncPreviewScroll()})):(r.off(a),i.on(a,function(){o.syncInputScroll()})))},mouseoverEditor:function(e){var o=this;t.handler(e,function(){o._mouseover(e,"editor")})},mouseoverPreview:function(e){var o=this;t.handler(e,function(){o._mouseover(e,"preview")})},buildScrollMap:function(){var o,n,r,i,a,s,d,l=this,c=l.$element,u=l.$preview,p=0,m=[],f=[],h=[];if(!l.enableScrollSync)return"";for(d=t.create("div").css({position:"absolute",visibility:"hidden",height:"auto",width:c[0].clientWidth,"font-size":c.css("font-size"),"font-family":c.css("font-family"),"line-height":c.css("line-height"),"white-space":c.css("white-space")}).appendTo("body"),n=u[0].scrollTop-u.offset().top,c.val().split("\n").forEach(function(e){var t,o;return m.push(p),0===e.length?void p++:(d.text(e),t=parseFloat(d.css("height")),o=parseFloat(d.css("line-height")),void(p+=Math.round(t/o)))}),d.remove(),m.push(p),s=p,o=0;s>o;o++)h.push(-1);for(f.push(0),h[0]=0,u.find(".md-line").each(function(t,o){var r=e(o),i=r.data("line");""!==i&&(i=m[i],0!==i&&f.push(i),h[i]=Math.round(r.offset().top+n))}),f.push(s),h[s]=u[0].scrollHeight,r=0,o=1;s>o;o++)-1===h[o]?(i=f[r],a=f[r+1],h[o]=Math.round((h[a]*(o-i)+h[i]*(a-o))/(a-i))):r++;return h},syncInputScroll:function(){var e,t,o,n=this,r=n.$element,i=n.$preview,a=n.scrollMap,s=i[0].scrollTop,d=parseFloat(r.css("line-height"));if(a||(a=n.scrollMap=n.buildScrollMap()),e=Object.keys(a),!(e.length<1)){for(o=e[0],t=1;t<e.length&&a[e[t]]<s;t++)o=e[t];r.stop(!0).animate({scrollTop:d*o},100,"linear")}},syncPreviewScroll:function(){var e,t=this,o=t.$element,n=t.$preview,r=t.scrollMap,i=parseFloat(o.css("line-height")),a=Math.floor(o[0].scrollTop/i);r||(r=t.scrollMap=t.buildScrollMap()),e=r[a],n.stop(!0).animate({scrollTop:e},100,"linear")},resetUndoStack:function(){var e=this,t=new i;return e.startValue=e.$element.val(),e.startPos=[0,0],t.changed=function(){e.disableButton(e.$btnUndo,!t.canUndo()),e.disableButton(e.$btnRedo,!t.canRedo())},t.changed(),t},parseButtons:function(){var t=this,o=t.$container,r=n.click;o.find(".md-btn,.md-btn-heading,.md-btn-export,.md-btn-emoji").each(function(){var o=e(this);o.off(r).on(r,function(e){t.clickButton(e,o)})})},getSelected:function(){var e=this,t=e.$element,o=t.val(),n=t[0];return o.substring(n.selectionStart,n.selectionEnd)},replaceSelected:function(e){var o=this,r=o.$element,i=r.val(),a=r[0],s=a.selectionStart,d=e.length,l=a.selectionEnd,c=i.substring(0,s)+e+i.substring(l),u=s+d;r.val(c).trigger(n.buttonPress,[[s,l],[s,u]]),t.setSelectionRange(a,s,u)},destroy:function(){var o=this,n=o.$element,r=o.$container,i=o.inputCss;n.insertBefore(r).off(t.NAMESPACE),e(window).off(t.NAMESPACE),i&&n.removeClass(i).show(),r.remove()},getLayout:function(e){return this.templates[e]||t.EMPTY},initForm:function(){var o,n,r,i=this,a=e("#"+i.exportFormId);return i.exportFormId&&a.length||(a=t.create("form")),a.attr({action:i.exportUrl,method:"post",target:"_blank"}),o=t.create("input").attr({type:"hidden",name:"export_type"}),n=t.create("input").attr({type:"hidden",name:"export_filename",value:i.exportFileName}),r=t.create("textarea").attr({name:"export_content"}).val(i.noDataMsg),a.append(o,n,r).hide()},showPopup:function(e,t){var o=this,r=n.modalShown;o.$dialogTitle.html(e),o.$dialogContent.html(t).show(),o.$dialogInput.hide(),o.$dialogClose.show(),o.$dialogHeader.show(),o.$dialogFooter.hide(),o.$dialogOk.off(n.click),o.$dialog.modal("show"),o.$dialog.off(r).on(r,function(){o.$dialogClose.focus(),o.$dialog.off(r)})},showDialog:function(e,o){var r,i=this,a=i.buttonPrompts[e],s=a.title||t.EMPTY,d=i.renderIcon(e),l=a.placeholder||t.EMPTY,c=n.modalShown;i.$dialogTitle.html(d?d+" "+s:s),i.$dialogContent.hide(),i.$dialogClose.show(),i.$dialogHeader.show(),i.$dialogFooter.show(),i.$dialogInput.show().val(t.EMPTY).attr("placeholder",l),i.$dialogOk.off(n.click).on(n.click,function(){r=o(i.$dialogInput.val()),t.isEmpty(r)||i.replaceSelected(r)}),i.$dialog.modal("show"),i.$dialog.off(c).on(c,function(){i.$dialogInput.focus(),i.$dialog.off(c)})},raise:function(o,n,r){var i=this,a=e.Event(o+t.NAMESPACE);return r=r||i.$element,n?r.trigger(a,n):r.trigger(a),!a.isDefaultPrevented()},showPreviewMsg:function(e){var t=this,o=t.$preview,n=t.getAlert(e,t.previewErrorTitle);o.html('<div class="md-preview-message">'+n+"</div>"),o.find(".md-preview-message").width(.5*o.width()),o.find(".md-alert").hide().fadeIn("slow")},disableButton:function(e,t){e.attr("disabled",t||!1)},hasInvalidConfig:function(e){var o=this,n=o[e+"Url"],r=o[e+"Method"],i=t.isEmpty(n),a=t.isEmpty(r),s=typeof r;return"export"===e&&o.enableExportDataUri?!1:i&&a||!a&&"function"!==s&&"object"!==s},parseOutput:function(t){var o=this,n=o.postProcess;return n&&("function"==typeof n?t=n(t):"object"==typeof n&&e.each(n,function(e,o){t=t.split(e).join(o)})),t},generatePreview:function(o,n){var r=this,i=r.$element,a=r.$preview,s=r.parserUrl,d=r.parserMethod,l=r.getProgress(r.previewProgressMsg);return void 0===o&&(o=i.val()),t.isEmpty(s)?(o="function"==typeof d?d(o):new d(o),o=r.parseOutput(o),n?o:void a.html(o)):(e.ajax({type:"POST",url:s,dataType:"json",data:{source:o},beforeSend:function(e){r.raise("beforePreview",[e])&&a.html(l)},success:function(e,o,n){var i=!t.isEmpty(e,!0);i&&r.raise("successPreview",[e,o,n])&&(e=r.parseOutput(e),a.html(e)),!i&&r.raise("emptyPreview",[e,o,n])&&r.showPreviewMsg(r.emptyPreviewMsg)},error:function(e,t,o){r.raise("errorPreview",[e,t,o])&&r.showPreviewMsg(r.errorPreviewMsg)}}),null)},output:function(){var e,o=this,r=o.$element,i=o.$preview,a=r.val(),s=!0,d=0,l=n.successPreview,c=n.emptyPreview+" "+n.errorPreview;if(t.isEmpty(a)||o.hasInvalidConfig("parser"))return t.EMPTY;if(e=o.generatePreview(a,!0),t.isEmpty(o.parserUrl))return e;for(;s&&d<o.outputParseTimeout;)t.delay(function(){r.off(l).on(l,function(){s=!1,e=i.html()}).off(c).on(c,function(){s=!1,e=""}),d+=150},150);return e},toggleMode:function(e){var o=this,n=o.$element,r=n.val(),i=o.$container,a=o.currentMode||"modeEditor",s=i.find(".md-input-preview"),d=function(){"editor"===a&&(o.$preview.html(o.getProgress(o.loadingMsg)),setTimeout(function(){o.generatePreview(),o.$mode.focus()},50))};if(t.isEmpty(r)||o.hasInvalidConfig("parser"))return void o.showPopupAlert(o.getTitle("mode"),t.isEmpty(r)?o.noDataMsg:o.noPreviewUrlMsg);switch(i.removeClass("md-only-preview"),s.removeClass("md-editor-mode md-preview-mode md-split-mode"),e){case"modeEditor":t.addCss(s,"md-editor-mode");break;case"modePreview":t.addCss(s,"md-preview-mode"),t.addCss(i,"md-only-preview"),d();break;case"modeSplit":t.addCss(s,"md-split-mode"),d()}},toggleFullScreen:function(){var e=this,t=e.$container,o=e.$element,n=e.$preview;t.hasClass("md-fullscreen-overlay")?(t.removeClass("md-fullscreen-overlay"),o.height(e.defaultInputHeight),n.height(e.defaultInputHeight)):(t.addClass("md-fullscreen-overlay"),e.resizeFullScreen()),n.is(":visible")?n.focus():o.focus()},resizeFullScreen:function(){var t=this,o=t.$container,n=t.$element,r=o.find(".md-header"),i=o.find(".md-footer"),a=e(window).height()-r.outerHeight(!0)-i.outerHeight(!0)-(n.outerHeight(!0)-n.height());n.height(a),t.$preview.height(a)},process:function(e){var o,n,r,i,a=this,s=a.$element,d=a.getSelected(),l=d.length,c=a.buttonActions[e];return s.focus(),"undo"===e||"redo"===e?"":c?"function"==typeof c?(o=c(d),"function"==typeof o?(a.showDialog(e,o),t.EMPTY):o):"object"!=typeof c||void 0===c.before&&void 0===c.after?t.EMPTY:(r=t.isEmpty(c.before)?t.EMPTY:c.before,i=t.isEmpty(c.after)?t.EMPTY:c.after,n=c["default"],o=c.inline?t.getMarkUp(d,r,i):t.getBlockMarkUp(d,r,i),n?l>0?o:n:o):t.EMPTY},download:function(e,o){var n=this,r=n.$form,i=n.exportConfig[e],a=t.create("a"),s=i.ext||"",d=i.uri||"";return t.isEmpty(n.exportUrl)?(d+=window.btoa(o),a.attr({href:d,target:"_blank",download:n.getFileName(e)}).insertAfter(r),a[0].click(),void a.remove()):(r.find('[name="export_type"]').val(s),r.find('[name="export_content"]').val(o),void r.submit())},getLabel:function(e){var o=this;return o.renderIcon(e)+" "+(o.buttonLabels[e]||t.EMPTY)},getTitle:function(e){var o=this;return o.renderIcon(e)+" "+(o.buttonTitles[e]||t.EMPTY)},getProgress:function(e){return'<div class="md-loading">'+e+"</div>"},getAlert:function(e,t,o){var n=this;return t=t?"<h4>"+(o?"":n.alertMsgIcon)+t+"</h4>":"",'<div class="'+n.alertMsgCss+' md-alert">'+t+e+"</div>"},showPopupAlert:function(e,t){var o=this,r=o.$dialog.find(".modal-body"),i=o.alertFadeDuration,a=n.modalShown,s=n.modalHidden;o.showPopup("",o.getAlert(t,e,!0)),o.$dialogHeader.hide(),o.$dialogFooter.hide(),o.$dialogClose.hide(),r.addClass("md-zero-pad"),o.$dialog.off(a).on(a,function(){i?setTimeout(function(){o.$dialog.modal("hide").off(a)},i):o.$dialog.modal("hide").off(a)}),o.$dialog.off(s).on(s,function(){r.removeClass("md-zero-pad"),o.$dialog.off(a).off(s),o.$element.focus()})},getHtmlContent:function(e){var t=this,o=t.exportPrependCssJs;return"<html>\n<head>\n"+t.getLayout("htmlMeta")+t.getLayout("exportCssJs").replace("{exportPrependCssJs}",o)+"\n</head>\n<body>\n"+e+"\n</body>\n</html>"},"export":function(o){var n,r=this,i=r.$element.val(),a=r.getTitle("exportText"),s=r.getTitle("exportHtml"),d=r.noDataMsg,l=r.exportErrorMsg,c=r.noExportUrlMsg,u=r.today||new Date;return t.isEmpty(i)||r.hasInvalidConfig("parser")||r.hasInvalidConfig("export")?void r.showPopupAlert("exportText"===o?a:s,t.isEmpty(i)?d:c):(i=r.getLayout("exportHeader").replace("{today}",u).replace("{credits}",t.CREDITS_MD)+i,"exportHtml"!==o?void r.download("exportText",i):t.isEmpty(r.parserUrl)?(n=t.parseHtml(r.generatePreview(i,!0)),void r.download("exportHtml",r.getHtmlContent(n))):void e.ajax({type:"POST",url:r.parserUrl,dataType:"json",data:{source:i},beforeSend:function(e){r.raise("beforeExportHtm",[e])&&r.showPopup(s,r.getProgress(r.exportProgressMsg))},success:function(e,t,n){r.raise("successExportHtm",[e,t,n])&&(r.$dialog.modal("hide"),e?r.download(o,r.getHtmlContent(e)):r.showPopupAlert(s,l))},error:function(e,t,o){r.raise("errorExportHtm",[e,t,o])&&r.showPopupAlert(s,l)}}))},renderIcon:function(e){var o=this,n=e&&o.buttonIcons[e]||t.EMPTY;return n?'<span class="'+o.buttonIconCssPrefix+n+'"></span>':t.EMPTY},render:function(){var o,n,r,i,a=this,s=a.$element,d=t.create("div").addClass("md-container"),l=a.getLayout("main"),c="md-editor-input-temporary",u=s.attr("id")+"-container",p=a.theme||"krajee";return l?(t.addCss(d,"md-"+p),n=l.replace("{input}",'<div class="'+c+'"></div>').replace("{header}",a.renderHeader()).replace("{footer}",a.renderFooter()).replace("{preview}",a.getLayout("preview")).replace("{dialog}",a.getLayout("dialog")),d.attr("id",u).insertBefore(s).html(n),o=d.find("."+c),s.insertBefore(o),t.addCss(s,a.inputCss),o.remove(),a.$container=d,a.$editor=d.find(".md-editor"),a.$preview=d.find(".md-preview"),a.$btnPreview=d.find(".md-btn-preview"),a.$btnUndo=d.find(".md-btn-undo"),a.$btnRedo=d.find(".md-btn-redo"),a.$dialog=d.find(".md-dialog"),a.$dialogTitle=a.$dialog.find(".md-dialog-title"),a.$dialogInput=a.$dialog.find(".md-dialog-input"),a.$dialogContent=a.$dialog.find(".md-dialog-content"),a.$dialogCancel=a.$dialog.find(".md-dialog-cancel").append(a.dialogCancelText),a.$dialogOk=a.$dialog.find(".md-dialog-ok").append(a.dialogOkText),a.$dialogClose=a.$dialog.find(".close"),a.$dialogHeader=a.$dialog.find(".modal-header"),a.$dialogFooter=a.$dialog.find(".modal-footer"),a.$mode=d.find(".md-btn-mode"),a.$modeInput=a.$mode.find('input:radio[name="mdMode"]'),a.$inputPreview=d.find(".md-input-preview"),a.$inputCell=d.find(".md-input-cell"),a.$previewCell=d.find(".md-preview-cell"),a.previewModeTitle&&a.$editor.find(".md-toolbar-header-l").prepend('<div class="md-preview-mode-title">'+a.previewModeTitle+"</div>"),"preview"===a.defaultMode||a.enableSplitMode&&"split"===a.defaultMode||(a.defaultMode="editor"),a.currentMode=a.defaultMode,t.addCss(a.$inputPreview,"md-"+a.defaultMode+"-mode"),e.each(a.dropUp,function(e,t){t&&d.find('button[data-key="'+e+'"]').parent().addClass("dropup")}),r=s.closest("form"),i=r.length?r:d,void a.$form.insertAfter(i)):t.EMPTY},_toolbar:function(t){var o=this,n=[];return e.each(o[t],function(t,o){var r=e.isArray(o)?o:[o];e.merge(n,r)}),n},getValidButtons:function(){var t=this,o=t._toolbar("toolbarHeaderL");return e.merge(o,t._toolbar("toolbarHeaderR")),e.merge(o,t._toolbar("toolbarFooterL")),e.merge(o,t._toolbar("toolbarFooterR")),o},renderHint:function(){var t,o,n,r,i,a,s,d=this,l=d.hintText,c="{accessKeys}";return-1===l.indexOf(c)?l:(t='<div class="md-hint-access-keys"><ul>',s=d.getValidButtons(),e.each(d.buttonAccessKeys,function(e,l){i=8===e.length&&"heading"===e.substring(0,7),(-1!==s.indexOf(e)||i||"mode"===e.substring(0,4)||"export"===e.substring(0,6))&&(i?(r=e.substring(7),o=d.renderIcon("heading")+r,n=d.buttonTitles.heading+" "+r):(o=d.renderIcon(e),n=d.buttonTitles[e]),a=d.buttonCss[e]||d.defaultButtonCss,t+='<li title="'+n+'"><p><span class="'+a+'">'+o+"</span></p><p><kbd>ALT</kbd> + <code>"+l+"</code></p></li>")}),t+="</ul></div>",l.replace(c,t))},renderHeader:function(){var e=this,t=e.getLayout("header");return t=e.renderToolbar(t,"toolbarHeaderL"),t=e.renderToolbar(t,"toolbarHeaderR")},renderFooter:function(){var e=this,t=e.getLayout("footer");return t=e.renderToolbar(t,"toolbarFooterL"),t=e.renderToolbar(t,"toolbarFooterR")},renderToolbar:function(o,n){var r=this,i="{"+n+"}",a=t.EMPTY;return-1===o.indexOf(i)?o:(e.each(r[n],function(t,o){e.isArray(o)||(o=[o]),a+='<div class="btn-group" role="group">\n',e.each(o,function(e,t){a+=r.renderButton(t)+"\n"}),a+="</div>\n"}),o.replace("{"+n+"}",a))},getFileName:function(e){var t=this,o=t.exportFileName,n=t.exportConfig[e]&&t.exportConfig[e].ext||"";return n?o+"."+n:o},renderMenuItem:function(e,o){var n,r,i=this,a=t.create("a"),s=t.create("div"),d=e+o;
return"export"===e?(n=i.buttonTitles[d],r=i.getLabel(d)):(n=i.buttonTitles[e],r=n+" "+o),a.attr({href:"#","class":"md-btn-"+e+" md-btn-"+d,title:n,accesskey:i.buttonAccessKeys[d],"data-key":d}).html(r),r=s.append(a).html(),s.remove(),r},getEmojies:function(){var o=this,n="";return t.isEmpty(o.markdownItEmojies)?"":(n='<li class="md-emoji-search"><span class="md-close">&times;</span><input type="text" class="form-control input-sm" placeholder="'+o.emojiSearchHint+'"></li>',e.each(window.mdEmojies,function(e,r){var i,a,s=":"+t.htmlEncode(e)+":",d=window.mdEmojiesShortcuts[e]||"";if(d)for(s+=" or ",i=0;i<d.length;i++)a=t.htmlEncode(d[i]),s+=0===i?a:" or "+a;n+='<li><a href="#" class="md-btn-emoji" title="'+s+'" data-key="'+e+'"><span class="md-emoji">'+(o.useTwemoji?window.twemoji.parse(r):r)+"</span></a></li>"}),n)},getModeButton:function(e){var t=this,o=t.buttonCss[e]||t.defaultButtonCss||"",n="",r=e.substr(4).toLowerCase(),i=t.buttonAccessKeys[e]||"";return t.defaultMode===r&&(o+=" active",n=" checked"),'<label class="'+o+'" title="'+t.buttonTitles[e]+'"><input type="radio" value="'+e+'" name="mdMode" autocomplete="off" accesskey="'+i+'"'+n+">"+t.renderIcon(e)+"</label>"},renderButton:function(e){var o,n,r,i,a,s,d,l,c,u,p=this,m=p.buttonTitles,f="mode"===e||void 0!==p.buttonIcons[e]||void 0!==p.buttonActions[e],h=p.buttonLabels,g="md-btn-"+e,v=p.buttonAccessKeys;if(!f||!p.enableUndoRedo&&("undo"===e||"redo"===e||"editor"===e))return t.EMPTY;switch(c=p.buttonCss[e]||p.defaultButtonCss,n=t.create("div"),o=t.create("button").attr({type:"button","data-key":e}),r=p.renderIcon(e),i=m[e]||t.EMPTY,a=h[e]||t.EMPTY,i&&o.attr("title",i),"fullscreen"!==e&&"hint"!==e&&"mode"!==e||(g+=" md-btn-special"),"fullscreen"===e&&(r='<span class="md-max-icon">'+r+'</span><span class="md-min-icon">'+p.fullScreenMinimizeIcon+"</span>"),a=r&&a?r+" "+a:r+a,n.append(o),e){case"heading":case"export":case"emoji":switch(o.html(a+" ").attr({"data-toggle":"dropdown"}).append('<span class="caret"></span>'),u=p.dropdownCss[e]?"dropdown-menu "+p.dropdownCss[e]:"dropdown-menu",l='<ul class="'+u+'">\n',e){case"heading":case"emoji":if(o.addClass(c+" dropdown-toggle md-btn-other"),"emoji"===e){l+=p.getEmojies();break}for(d=1;7>d;d++)s=i+" "+d,l+="<li>"+p.renderMenuItem("heading",d)+"</li>";break;case"export":o.addClass(c+" dropdown-toggle"),l+="<li>"+p.renderMenuItem(e,"Html")+"</li><li>"+p.renderMenuItem(e,"Text")+"</li>"}return l+="</ul>",n.append(l).attr({"class":"btn-group",role:"group"}),n=t.create("div").append(n),l=n.html(),n.remove(),l;case"mode":return'<div class="btn-group md-btn-mode" data-toggle="buttons">'+p.getModeButton("modeEditor")+p.getModeButton("modePreview")+(p.enableSplitMode?p.getModeButton("modeSplit"):"")+"</div>";default:return o.attr("accesskey",v[e]).html(a).addClass(c+" "+g+" md-btn"),n.html()}}},e.fn.markdownEditor=function(o){var n=Array.apply(null,arguments),r=[];switch(n.shift(),this.each(function(){var i,a,d=e(this),l=d.data("markdownEditor"),c="object"==typeof o&&o,u=c.language||d.data("language")||"en";l||(i="en"===u||t.isEmpty(e.fn.markdownEditorLocales[u])?{}:e.fn.markdownEditorLocales[u],a=e.extend(!0,{},e.fn.markdownEditor.defaults,e.fn.markdownEditorLocales.en,i,c,d.data()),l=new s(this,a),d.data("markdownEditor",l)),"string"==typeof o&&r.push(l[o].apply(l,n))}),r.length){case 0:return this;case 1:return r[0];default:return r}},e.fn.markdownEditor.defaults={language:"en",theme:"krajee",rows:15,defaultMode:"editor",enableUndoRedo:!0,enableExportDataUri:!0,enableSplitMode:!0,enableLivePreview:void 0,enableScrollSync:!0,startFullScreen:!1,templates:{main:o.main,header:o.header,preview:o.preview,footer:o.footer,dialog:o.dialog,exportHeader:o.exportHeader,htmlMeta:o.htmlMeta,exportCssJs:o.exportCssJs},toolbarHeaderL:[["undo","redo"],["bold","italic","ins","del","sup","sub","mark"],["paragraph","newline","heading"],["link","image"],["indent","outdent","ul","ol","dl"],["footnote","blockquote","hr"],["code","codeblock"],["emoji"]],toolbarHeaderR:[["fullscreen"]],toolbarFooterL:[["hint"],["export"]],toolbarFooterR:[["mode"]],exportPrependCssJs:o.prependCss,inputCss:"md-input",defaultButtonCss:"btn btn-default",buttonCss:{hint:"btn btn-info"},dropdownCss:{emoji:"md-emojies-list pull-right"},dropUp:{"export":!0},buttonIconCssPrefix:"fa fa-",buttonIcons:{},buttonAccessKeys:{},parserUrl:t.EMPTY,parserMethod:void 0,markdownItOptions:{html:!1,linkify:!0,typographer:!0,highlight:function(e){return window.hljs?window.hljs.highlightAuto(e).value:e}},markdownItDisabledRules:[],markdownItPlugins:{markdownitDeflist:{},markdownitFootnote:{},markdownitAbbr:{},markdownitEmoji:{},markdownitSub:{},markdownitSup:{},markdownitMark:{},markdownitIns:{},markdownitSmartArrows:{},markdownitCheckbox:{divWrap:!0,divClass:"checkbox",idPrefix:"cbx_"}},markdownItEmojies:window.mdEmojies||{},useTwemoji:!1,exportUrl:t.EMPTY,exportMethod:t.EMPTY,exportFormId:t.EMPTY,today:t.EMPTY,alertMsgIcon:'<i class="fa fa-exclamation-circle"></i> ',alertMsgCss:"alert alert-danger",alertFadeDuration:2e3,outputParseTimeout:18e5,exportConfig:r.exportConfig,fullScreenMinimizeIcon:'<i class="fa fa-compress"></i>',postProcess:{"<table>":'<table class="table table-bordered table-striped">'}},e.fn.markdownEditorLocales.en={noDataMsg:"No valid source data found!",exportFileName:"export",buttonTitles:{},buttonLabels:{},buttonPrompts:{},buttonActions:{},hintText:o.hint,dialogCancelText:"Cancel",dialogOkText:"Ok",previewErrorTitle:"Preview Error",previewModeTitle:"Preview Mode",noPreviewUrlMsg:"Markdown preview processor unavailable. Please contact the system administrator.",emptyPreviewMsg:"No formatted content available for preview.",errorPreviewMsg:"Error generating preview. Please try again later.",previewProgressMsg:"Generating preview ...",noExportUrlMsg:"Export processor unavailable. Please contact the system administrator.",exportProgressMsg:"Generating export file for download ...",exportErrorMsg:"Error generating export. Please try again later.",emojiSearchHint:"Search emojis ...",loadingMsg:"Loading ..."},e.fn.markdownEditor.Constructor=s,e(document).ready(function(){var t=e("textarea.markdown");t.length&&t.markdownEditor()})});